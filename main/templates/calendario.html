<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calendario â€“ Candid</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body class="bg-[#0b0b0e] text-[#e9e9ee] font-sans">
  <div class="max-w-6xl mx-auto px-6 py-6">
    
    <!-- HEADER -->
    <header class="flex justify-between items-center mb-6">
      <h1 class="text-2xl font-bold">ðŸ“… Candid â€“ Calendario</h1>
      <div class="flex gap-2">
        <a href="{% url 'calendar_admin' %}" 
           class="bg-[#1b1b22] border border-gray-700 px-3 py-1 rounded-lg text-sm hover:bg-gray-800">
          Admin
        </a>
        <a href="{% url 'calendar_user' %}" 
           class="bg-[#1b1b22] border border-gray-700 px-3 py-1 rounded-lg text-sm hover:bg-gray-800">
          User
        </a>
      </div>
    </header>

    <!-- CALENDARIO -->
    <section class="bg-[#121217] border border-gray-800 rounded-xl shadow-lg p-5">
      <h3 class="text-lg font-semibold mb-4">Calendario</h3>
      <div id="calendar" class="rounded-lg overflow-hidden"></div>
    </section>
  </div>
  
<script>
document.addEventListener('DOMContentLoaded', function() {
  var calendarEl = document.getElementById('calendar');

  var calendar = new FullCalendar.Calendar(calendarEl, {
    initialView: 'dayGridMonth',
    height: 600,
    events: '/api/eventos/',
    eventClick: function(info) {
      const ev = info.event.extendedProps;

      Swal.fire({
        title: info.event.title,
        html: `
          <p><b>Fecha inicio:</b> ${info.event.startStr}</p>
          <p><b>Fecha fin:</b> ${info.event.endStr}</p>
          <p><b>Estado:</b> ${ev.estado}</p>
          <p><b>Progreso:</b> ${ev.progreso}%</p>
          <p><b>EspecificaciÃ³n:</b><br>${ev.especificacion || "â€”"}</p>
        `,
        confirmButtonText: 'Cerrar',
        confirmButtonColor: '#ff2d55',
        width: '400px',
        background: '#1b1b22',
        color: '#f6f7fb'
      });
    }
  });

  calendar.render();
});
</script>
</body>
</html>
